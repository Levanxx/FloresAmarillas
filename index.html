<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jardin de tulipanes</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --sky1:#bfe8ff; --sky2:#eef9ff; --sun:#FFD54F;
    --grass1:#9bd17a; --grass2:#6fbf63; --soil:#5f4634;
    --stem:#2e7d32; --leaf:#43a047;
    --yellow:#FFC107; --yellow-2:#FFD95A; --heart:#ffd1dc;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; font-family:Poppins,system-ui,sans-serif; color:#0f1320;
    background:linear-gradient(180deg,var(--sky1),var(--sky2) 55%,#e9fbff 70%);
    overflow-x:hidden;
  }

  /* --- Overlay (gate) y contenedor de la app --- */
  #app{opacity:0; transition:opacity .6s ease}
  #app.show{opacity:1}
  .gate{
    position:fixed; inset:0; z-index:9999;
    display:flex; align-items:center; justify-content:center; flex-direction:column; gap:14px;
    background:linear-gradient(180deg,var(--sky1),var(--sky2) 55%,#e9fbff 70%);
  }
  .gate.fade{opacity:0; pointer-events:none; transition:opacity .6s ease}
  .gate-btn{
    appearance:none; border:none; cursor:pointer;
    padding:14px 22px; border-radius:16px; font-weight:700; font-size:18px;
    background:linear-gradient(90deg,#ffe082,#ffd54f);
    box-shadow:0 10px 28px rgba(255,193,7,.35);
  }
  .gate-msg{font-weight:600; opacity:.9}

  /* Cielo */
  .sun{position:absolute; top:40px; right:60px; width:120px; height:120px; border-radius:50%;
    background:radial-gradient(circle at 35% 35%, #fff8e1 0 35%, var(--sun) 36% 70%, rgba(255,213,79,.6) 71% 100%);
    box-shadow:0 0 80px 20px rgba(255,213,79,.45), inset 0 0 20px rgba(255,255,255,.6);
    animation:pulse 6s ease-in-out infinite; z-index:1}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}

  /* Tarjeta */
  .card{
    position:relative; max-width:980px; margin:40px auto 0; padding:28px 22px; text-align:center;
    background:rgba(255,255,255,.58); backdrop-filter:blur(6px);
    border-radius:22px; border:1px solid rgba(255,255,255,.8);
    box-shadow:0 10px 30px rgba(0,0,0,.22); z-index:2;
  }
  .title{font-family:"Playfair Display",serif; font-weight:700; font-size:clamp(28px,4.2vw,46px); margin:0 0 6px}
  .subtitle{font-weight:500; font-size:clamp(14px,2.2vw,18px); margin:0; opacity:.9}
  .highlight{background:linear-gradient(90deg,#fff6a9,#ffe27a); padding:2px 8px; border-radius:10px}
  .btn{appearance:none; border:none; cursor:pointer; margin-top:10px; padding:10px 16px; border-radius:12px; font-weight:600;
       background:linear-gradient(90deg,#ffe082,#ffd54f); box-shadow:0 6px 20px rgba(255,193,7,.35)}

  /* JardÃ­n */
  .garden{position:relative; width:100%; height:66vh; min-height:500px; overflow:hidden; margin-top:16px}
  .soil{position:absolute; left:0; right:0; bottom:0; height:120px;
    background:linear-gradient(180deg,#7a5a44,var(--soil)); z-index:2; display:flex; justify-content:center; align-items:center}
  .grass{position:absolute; left:0; right:0; bottom:100px; height:140px; z-index:2;
    background:repeating-linear-gradient(90deg,var(--grass2) 0 6px, var(--grass1) 6px 12px)}

  .layer{position:absolute; inset:0; z-index:3}

  /* Tulipanes */
  .flower{
    position:absolute; bottom:180px;
    transform-origin:bottom center;
    animation:sway 4.8s ease-in-out infinite, grow-in .9s ease-out both;
    filter:drop-shadow(0 4px 8px rgba(0,0,0,.15));
    cursor:pointer;
  }
  @keyframes sway{0%,100%{transform:rotate(0)}50%{transform:rotate(var(--tilt,3deg))}}
  @keyframes grow-in{from{opacity:0; transform:scale(.94) translateY(10px)} to{opacity:1; transform:scale(1) translateY(0)}}

  .stem{width:6px; height:var(--h,200px);
        background:linear-gradient(180deg,#2e7d32,#1b5e20);
        margin:0 auto; border-radius:6px; position:relative}
  .leaf{position:absolute; width:22px; height:30px;
        background:radial-gradient(circle at 20% 20%, #9be7a1 0 30%, var(--leaf) 31% 100%);
        border-radius:0 22px 22px 22px}
  .leaf.l1{ left:6px; top:calc(var(--h)*.46); transform:rotate(25deg)}
  .leaf.l2{ right:6px; top:calc(var(--h)*.66); transform:rotate(-35deg)}

  .tulip .head{
    --w: 54px; --h: 58px;
    position:absolute; left:50%; top:-32px; transform:translate(-50%,-50%);
    width:var(--w); height:var(--h);
    background:radial-gradient(circle at 50% 0%, #fff8c6 0 28%, var(--yellow) 29% 100%);
    border-radius:50% 50% 45% 45%;
    clip-path:polygon(0 0,100% 0,100% 60%,80% 100%,50% 78%,20% 100%,0 60%);
  }
  .tulip .crown{
    position:absolute; left:50%; top:-10px; transform:translateX(-50%);
    width:60px; height:30px;
    background:radial-gradient(circle at 50% 100%, var(--yellow-2) 0 40%, var(--yellow) 41% 100%);
    clip-path:polygon(0 100%, 16% 0, 33% 100%, 50% 0, 66% 100%, 83% 0, 100% 100%);
  }

  /* Corazones */
  .heart{--x:50%; position:absolute; left:var(--x); bottom:170px; width:20px; height:20px;
    transform:translateX(-50%) rotate(-45deg); background:var(--heart); animation:floatUp 6s ease-in infinite; opacity:.85}
  .heart:before,.heart:after{content:""; position:absolute; width:20px; height:20px; border-radius:50%; background:inherit}
  .heart:before{top:-10px; left:0} .heart:after{left:10px; top:0}
  @keyframes floatUp{0%{transform:translate(-50%,0) rotate(-45deg); opacity:0}10%{opacity:.9}100%{transform:translate(-50%,-220px) rotate(-45deg); opacity:0}}

  /* Texto en la tierra */
  .floating-note{
    padding:10px 20px; border-radius:999px;
    background:rgba(255,255,255,.7); backdrop-filter:blur(6px);
    border:1px solid rgba(255,255,255,.8); box-shadow:0 6px 18px rgba(0,0,0,.25);
    font-weight:700; font-size:20px; animation:bob 3s ease-in-out infinite;
  }
  @keyframes bob{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-6px) } }

  .hint-badge{
    position:absolute;
    top: clamp(6px, 1.8vw, 18px);   /* mÃ¡s arriba */
    right: 14px;
    z-index:5;
    background:rgba(255,255,255,.85);
    border:1px solid rgba(255,255,255,.9);
    backdrop-filter:blur(6px);
    padding:8px 12px; border-radius:999px;
    font-weight:600; font-size:14px;
    box-shadow:0 6px 18px rgba(0,0,0,.15);
  }
  @media (max-width: 600px){
    .hint-badge{
      left:50%; right:auto; transform:translateX(-50%);
      top: 10px;
    }
  }

  /* Burbuja de mensaje */
  .msg-bubble{
    position:absolute; z-index:6; max-width:220px;
    background:#fff; color:#0f1320;
    border:1px solid rgba(0,0,0,.08);
    border-radius:14px; padding:10px 12px;
    box-shadow:0 10px 30px rgba(0,0,0,.18);
    transform:translate(-50%,-100%);
    animation:popIn .18s ease-out;
    font-weight:600; font-size:14px; line-height:1.25;
  }
  .msg-bubble::after{
    content:""; position:absolute; left:50%; bottom:-8px; transform:translateX(-50%) rotate(45deg);
    width:14px; height:14px; background:#fff;
    border-left:1px solid rgba(0,0,0,.08); border-bottom:1px solid rgba(0,0,0,.08);
  }
  @keyframes popIn{from{opacity:0; transform:translate(-50%,-90%) scale(.96)} to{opacity:1; transform:translate(-50%,-100%) scale(1)}}
</style>
</head>
<body>

  <!-- Gate (pantalla inicial) -->
  <div class="gate" id="gate">
    <div class="gate-msg">ðŸŽµ Para iniciar la experiencia</div>
    <button class="gate-btn" id="enterBtn">Presiona aquÃ­</button>
  </div>

  <!-- Contenido original envuelto -->
  <div id="app">
    <!-- Tarjeta -->
    <section class="card">
      <h1 class="title">Un jardÃ­n de <span class="highlight">tulipanes amarillos</span> para ti ðŸŒ·</h1>
      <p class="subtitle">Si los tulipanes pudieran hablar, seguro te dirÃ­an lo especial que eres âœ¨</p>
      <button class="btn" id="toggleHearts">Lanzar corazoncitos</button>
    </section>

    <!-- JardÃ­n -->
    <section class="garden" id="garden">
      <div class="hint-badge">Presiona cada tulipÃ¡n ðŸŒ·</div>
      <div class="layer" id="layer"></div>
      <div class="grass"></div>
      <div class="soil">
        <div class="floating-note">ðŸ’› Yazuri</div>
      </div>
    </section>
  </div>

<script>
  const garden = document.getElementById('garden');
  const layer  = document.getElementById('layer');
  const mql    = window.matchMedia('(max-width: 600px)'); // mÃ³vil

  const tulipMessages = [
    "Gracias por aguantar mis ocurrencias ðŸ˜‚",
    "Si existiera un premio a la buena onda, serÃ­a tuyo ðŸ†",
    "QuÃ© suerte tener a alguien como tÃº ðŸ€",
    "Contigo hasta los dÃ­as aburridos se arreglan âœ¨",
    "Eres como un tulipÃ¡n amarillo: alegrando todo ðŸ’›",
    "Tienes la risa mÃ¡s contagiosa que conozco ðŸ˜„",
    "Eres la prueba de que aun hay personas buenas en el mundo ðŸŒ",
    "Si el buen humor fuera persona, tendrÃ­a tu cara ðŸ˜Ž",
    "Siempre sabes cÃ³mo levantar el Ã¡nimo â˜€ï¸",
    "El mundo se ve mÃ¡s bonito con gente como tÃº ðŸŒ¸",
    "La playlist 'yaz' es una de mis favoritas ðŸŽ¶",
    "Nunca cambies esa vibra positiva âœ¨",
    "Amistades como la tuya son tesoros ðŸŒŸ",
    "Eres pura vitamina para el alma ðŸ’ŠðŸ’–",
    "Con tu amistad hasta los lunes se sienten viernes ðŸŽ‰",
    "Eres mi emoji favorito en persona, digo xd ðŸ˜‚ðŸŒ·",
    "OjalÃ¡ mÃ¡s personas fueran como tÃº ðŸ™Œ",
    "Gracias por ser autÃ©ntica siempre ðŸ’¯",
    "Esa chispa tuya hace todo diferente ðŸ”†"
  ];

  /* Burbuja encima del tulipÃ¡n */
  function showBubbleNear(elem, text) {
    document.querySelectorAll('.msg-bubble').forEach(b => b.remove());
    const rect = elem.getBoundingClientRect();
    const grect = garden.getBoundingClientRect();
    const bubble = document.createElement('div');
    bubble.className = 'msg-bubble';
    bubble.textContent = text;
    const x = rect.left + rect.width/2 - grect.left;
    const y = rect.top - grect.top - 8;
    bubble.style.left = `${x}px`;
    bubble.style.top  = `${y}px`;
    garden.appendChild(bubble);
    setTimeout(()=> bubble.remove(), 2500);
  }

  function createTulip(heightPx, scale=1, msgIndex=0){
    const flower = document.createElement('div');
    flower.className = 'flower tulip';
    flower.style.setProperty('--h', heightPx + 'px');
    flower.style.transform += ` scale(${scale})`;
    flower.dataset.msgIndex = msgIndex;

    const stem = document.createElement('div'); stem.className = 'stem';
    const l1 = document.createElement('div'); l1.className = 'leaf l1';
    const l2 = document.createElement('div'); l2.className = 'leaf l2';
    stem.appendChild(l1); stem.appendChild(l2);

    const head = document.createElement('div'); head.className = 'head';
    const crown = document.createElement('div'); crown.className = 'crown';
    head.appendChild(crown);

    flower.appendChild(stem);
    flower.appendChild(head);

    flower.addEventListener('click', () => {
      const i = parseInt(flower.dataset.msgIndex, 10) || 0;
      const msg = tulipMessages[i] || tulipMessages[0] || "ðŸŒ·";
      showBubbleNear(flower, msg);
    });

    return flower;
  }

  function clearLayer(){ while(layer.firstChild) layer.removeChild(layer.firstChild); }

  function renderGarden(){
    clearLayer();
    const isMobile = mql.matches;
    const bigN = isMobile ? 5 : 10;
    const addSmall = !isMobile;
    const marginVW = isMobile ? 10 : 8;
    const step = (100 - 2*marginVW) / (bigN - 1);
    let tIndex = 0;

    for(let i=0;i<bigN;i++){
      const x = marginVW + i*step;
      const baseH = isMobile ? 160 : 180;

      const bigTulip = createTulip(baseH + (i%2===0?14:-8), isMobile ? 0.95 : 1, tIndex++);
      bigTulip.style.left = x + 'vw';
      bigTulip.style.animationDelay = (i*0.06)+'s';
      layer.appendChild(bigTulip);

      if(addSmall && i<bigN-1){
        const midX = x + step/2;
        const smallTulip = createTulip(120 + (i%2===0?-5:10), 0.75, tIndex++);
        smallTulip.style.left = midX + 'vw';
        smallTulip.style.animationDelay = (i*0.06 + 0.03)+'s';
        layer.appendChild(smallTulip);
      }
    }
  }

  // Primera render
  renderGarden();

  // Re-render al cambiar tamaÃ±o/orientaciÃ³n
  mql.addEventListener ? mql.addEventListener('change', renderGarden)
                       : mql.addListener(renderGarden);
  window.addEventListener('orientationchange', renderGarden);
  window.addEventListener('resize', (()=> {
    let t; return ()=>{ clearTimeout(t); t=setTimeout(renderGarden,150); };
  })());

  // Corazones
  const btn = document.getElementById('toggleHearts');
  let heartsOn=false, timer=null;
  function spawnHeart(){
    const h = document.createElement('div');
    h.className='heart';
    h.style.setProperty('--x', (10+Math.random()*80)+'%');
    h.style.animationDuration = (4+Math.random()*3)+'s';
    garden.appendChild(h);
    setTimeout(()=>h.remove(),8000);
  }
  btn.addEventListener('click', ()=>{
    heartsOn = !heartsOn;
    btn.textContent = heartsOn ? 'Detener corazoncitos' : 'Lanzar corazoncitos';
    if(heartsOn){ spawnHeart(); timer=setInterval(spawnHeart,900) } else { clearInterval(timer) }
  });
</script>

  <audio id="bgm" autoplay loop playsinline preload="auto" style="display:none">
    <source src="assets/thoseeyes.mp3" type="audio/mpeg">
  </audio>

  <!-- LÃ³gica del gate: reproduce y revela -->
  <script>
    (function(){
      const gate = document.getElementById('gate');
      const app  = document.getElementById('app');
      const btn  = document.getElementById('enterBtn');
      const bgm  = document.getElementById('bgm');

      btn.addEventListener('click', async () => {
        try {
          bgm.muted = false;
          bgm.volume = 0.6;
          await bgm.play();
        } catch(e) { /* si falla, igual se muestra la app */ }
        finally {
          app.classList.add('show');
          gate.classList.add('fade');
          setTimeout(()=> gate.remove(), 700);
        }
      });
    })();
  </script>
</body>
</html>